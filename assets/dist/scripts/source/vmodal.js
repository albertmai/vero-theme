(function(){var e;e=function(){function t(t,e){this.$body=jQuery(document.body),this.$element=jQuery(t),this.$link=jQuery(e),this.isRemote=this.$link.hasClass("vmodal-remote"),this.isShown=null,this.$backdrop=null}return t.prototype.load=function(){return this.toggleModal(),jQuery(document).trigger("vmodal:loaded")},t.prototype.toggleModal=function(){return this.isShown?this.hide():this.show()},t.prototype.hide=function(){var t;return(t=this).isShown=!1,this.$body.removeClass("vmodal-open"),this.$element.fadeOut(),this.isRemote&&t.$element.html(""),this.$backdrop.animate({opacity:"0"},400,function(){return t.$backdrop.remove()}),this.toggleListener(),jQuery(document).trigger("vmodal:hide")},t.prototype.show=function(){var e;return(e=this).isShown=!0,this.isRemote&&$.get(this.$link.attr("href"),function(t){return e.$element.html(t)}),this.$body.addClass("vmodal-open"),this.$backdrop=jQuery('<div class="vmodal-backdrop no-show" />').appendTo(this.$body),this.$backdrop.animate({opacity:".8"}),this.$element.fadeIn(),this.toggleListener(),jQuery(document).trigger("vmodal:show")},t.prototype.toggleListener=function(){var e;return(e=this).isShown?(this.$body.on("keyup",function(t){return 27===t.keyCode?e.hide():null}),this.$element.on("click",".close, .vmodal-close",function(t){return e.hide(),!1}),this.$element.on("click",function(t){return t.target===e.$element[0]?e.hide():void 0})):(this.$body.off("keyup"),this.$element.off("click"))},t}(),jQuery(function(){return jQuery(document).on("click","[data-toggle=vmodal]",function(t){return t.preventDefault(),new e(jQuery(this).data("target"),this).load()})})}).call(this);